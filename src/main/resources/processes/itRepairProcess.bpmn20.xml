<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:activiti="http://activiti.org/bpmn"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
             typeLanguage="http://www.w3.org/2001/XMLSchema"
             expressionLanguage="http://www.w3.org/1999/XPath"
             targetNamespace="http://www.activiti.org/processdef">

    <process id="itRepairProcess" name="IT 報修流程" isExecutable="true">

        <startEvent id="startEvent" name="報修申請">
            <extensionElements>
                <activiti:formProperty id="device" name="報修設備" type="enum" required="true">
                    <activiti:value id="laptop" name="筆記型電腦"/>
                    <activiti:value id="monitor" name="外接螢幕"/>
                    <activiti:value id="printer" name="印表機"/>
                    <activiti:value id="network" name="網路問題"/>
                    <activiti:value id="other" name="其他"/>
                </activiti:formProperty>
                <activiti:formProperty id="description" name="問題描述" type="string" required="true"/>
                <activiti:formProperty id="urgency" name="緊急程度" type="enum" required="true">
                    <activiti:value id="low" name="低 (3天內)"/>
                    <activiti:value id="medium" name="中 (1天內)"/>
                    <activiti:value id="high" name="高 (立即處理)"/>
                </activiti:formProperty>
            </extensionElements>
        </startEvent>

        <sequenceFlow id="flow1" sourceRef="startEvent" targetRef="handleTicketTask"></sequenceFlow>

        <userTask id="handleTicketTask" name="IT 報修處理" activiti:candidateGroups="ROLE_IT">
            <extensionElements>
                <activiti:formProperty id="solution" name="處理結果" type="string" required="true"/>
                <activiti:formProperty id="isFixed" name="是否修復" type="enum" required="true">
                    <activiti:value id="yes" name="已修復"/>
                    <activiti:value id="no" name="無法修復(需後送)"/>
                </activiti:formProperty>
            </extensionElements>
        </userTask>

        <sequenceFlow id="flow2" sourceRef="handleTicketTask" targetRef="endEvent"></sequenceFlow>

        <endEvent id="endEvent" name="結案"></endEvent>

    </process>

    <bpmndi:BPMNDiagram id="BPMNDiagram_ITRepair">
        <bpmndi:BPMNPlane id="BPMNPlane_ITRepair" bpmnElement="itRepairProcess">
            <bpmndi:BPMNShape id="BPMNShape_startEvent" bpmnElement="startEvent">
                <dc:Bounds x="150" y="200" width="36" height="36" />
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="148" y="240" width="44" height="14" />
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape id="BPMNShape_handleTicketTask" bpmnElement="handleTicketTask">
                <dc:Bounds x="260" y="178" width="100" height="80" />
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape id="BPMNShape_endEvent" bpmnElement="endEvent">
                <dc:Bounds x="430" y="200" width="36" height="36" />
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="437" y="240" width="22" height="14" />
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNEdge id="BPMNEdge_flow1" bpmnElement="flow1">
                <di:waypoint x="186" y="218" />
                <di:waypoint x="260" y="218" />
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge id="BPMNEdge_flow2" bpmnElement="flow2">
                <di:waypoint x="360" y="218" />
                <di:waypoint x="430" y="218" />
            </bpmndi:BPMNEdge>
        </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>
</definitions>